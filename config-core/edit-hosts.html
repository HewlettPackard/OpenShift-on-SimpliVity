<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Editing the hosts file | Red Hat OpenShift on HPE SimpliVity</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/Openshift-on-Simplivity/assets/css/0.styles.2688ee33.css" as="style"><link rel="preload" href="/Openshift-on-Simplivity/assets/js/app.6756e726.js" as="script"><link rel="preload" href="/Openshift-on-Simplivity/assets/js/2.1dbc2e0f.js" as="script"><link rel="preload" href="/Openshift-on-Simplivity/assets/js/14.e810c29a.js" as="script"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/10.b07b56d4.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/11.9555d052.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/12.65c563ea.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/13.c0894542.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/15.f0401ee8.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/16.6931e72a.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/17.efc0bec7.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/18.5737a5fd.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/19.e2923d31.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/20.587b3b8e.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/21.b83682e9.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/22.50414da3.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/23.188d8ad3.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/24.c0663f0b.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/25.bb8e22b0.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/26.501cade6.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/27.a7511174.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/28.5bc43de6.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/29.34bd11fa.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/3.50c5b2bc.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/30.bdf98bdc.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/31.215cd8fc.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/32.f9d5aa06.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/33.1f7afce8.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/34.7ebf25ff.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/35.25cd950d.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/36.a78c2ad6.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/37.84770b2a.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/38.773d744d.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/39.da81b7e9.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/4.e53f978e.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/40.0df96d6a.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/41.28f1ef48.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/42.755b4272.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/43.f2d457c8.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/44.e234843b.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/45.76b53e7b.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/46.2f5d4831.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/47.c0d0941e.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/48.a20ef485.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/49.27ceb941.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/5.0e2cb660.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/50.b1f6397e.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/51.10f537c8.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/52.c5e6db6a.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/53.b3f0289c.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/54.2f275aa2.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/55.1095b46e.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/56.6dae4490.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/6.fc13e2e3.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/7.299a9148.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/8.cc524ee6.js"><link rel="prefetch" href="/Openshift-on-Simplivity/assets/js/9.f5f3bb57.js">
    <link rel="stylesheet" href="/Openshift-on-Simplivity/assets/css/0.styles.2688ee33.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Openshift-on-Simplivity/" class="home-link router-link-active"><!----> <span class="site-name">Red Hat OpenShift on HPE SimpliVity</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Openshift-on-Simplivity/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Openshift-on-Simplivity/blog/" class="nav-link">Blog</a></div> <a href="https://github.com/HewlettPackard/Openshift-on-Simplivity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Openshift-on-Simplivity/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Openshift-on-Simplivity/blog/" class="nav-link">Blog</a></div> <a href="https://github.com/HewlettPackard/Openshift-on-Simplivity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Introduction</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Release Notes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Preparing the environment</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Configuring the solution</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Openshift-on-Simplivity/config-core/ansible-config.html" class="sidebar-link">Ansible configuration</a></li><li><a href="/Openshift-on-Simplivity/config-core/edit-hosts.html" class="active sidebar-link">Editing the hosts file</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Openshift-on-Simplivity/config-core/edit-hosts.html#cluster-nodes" class="sidebar-link">Cluster nodes</a></li><li class="sidebar-sub-header"><a href="/Openshift-on-Simplivity/config-core/edit-hosts.html#supporting-nodes" class="sidebar-link">Supporting nodes</a></li><li class="sidebar-sub-header"><a href="/Openshift-on-Simplivity/config-core/edit-hosts.html#groups-of-groups" class="sidebar-link">Groups of groups</a></li><li class="sidebar-sub-header"><a href="/Openshift-on-Simplivity/config-core/edit-hosts.html#general-recommendations" class="sidebar-link">General recommendations</a></li></ul></li><li><a href="/Openshift-on-Simplivity/config-core/vmware-config.html" class="sidebar-link">VMware configuration</a></li><li><a href="/Openshift-on-Simplivity/config-core/networking-config.html" class="sidebar-link">Networking configuration</a></li><li><a href="/Openshift-on-Simplivity/config-core/redhat-config.html" class="sidebar-link">Red Hat Network configuration</a></li><li><a href="/Openshift-on-Simplivity/config-core/openshift-config.html" class="sidebar-link">OpenShift configuration</a></li><li><a href="/Openshift-on-Simplivity/config-core/lbs-config.html" class="sidebar-link">Load balancer configuration</a></li><li><a href="/Openshift-on-Simplivity/config-core/group-vars.html" class="sidebar-link">Inventory group variables</a></li><li><a href="/Openshift-on-Simplivity/config-core/edit-vault.html" class="sidebar-link">Protecting sensitive information</a></li><li><a href="/Openshift-on-Simplivity/config-core/vars-sample.html" class="sidebar-link">Sample vars file</a></li><li><a href="/Openshift-on-Simplivity/config-core/vault-sample.html" class="sidebar-link">Sample vault file</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Overview of the playbooks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Post deployment tasks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Configuring storage</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Deploying worker nodes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Deploying cluster logging</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Backup and restore</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Appendices</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="editing-the-hosts-file"><a href="#editing-the-hosts-file" aria-hidden="true" class="header-anchor">#</a> Editing the hosts file</h1> <p>The <code>hosts</code> file consists of definitions for:</p> <ul><li>Cluster nodes, including masters and workers</li> <li>Supporting nodes, including a bootstrap node, infrastructure nodes for DNS and DSCP, and an NFS server</li> <li>Groupings of nodes, such as all cluster nodes, all CoreOS nodes, all worker nodes, etc.</li></ul> <h2 id="cluster-nodes"><a href="#cluster-nodes" aria-hidden="true" class="header-anchor">#</a> Cluster nodes</h2> <h3 id="master-nodes"><a href="#master-nodes" aria-hidden="true" class="header-anchor">#</a> Master nodes</h3> <p>A minimum of three master nodes are required.</p> <div class="language- extra-class"><pre class="language-text"><code>[master]
ocp-master0   ansible_host=10.15.155.210
ocp-master1   ansible_host=10.15.155.211
ocp-master2   ansible_host=10.15.155.212
</code></pre></div><h3 id="coreos-worker-nodes"><a href="#coreos-worker-nodes" aria-hidden="true" class="header-anchor">#</a> CoreOS worker nodes</h3> <p>A minimum of two CoreOS worker nodes must be specified in the <code>rhcos_worker</code> group
for the initial cluster deployment.</p> <div class="language- extra-class"><pre class="language-text"><code>[rhcos_worker]
ocp-worker0   ansible_host=10.15.155.213
ocp-worker1   ansible_host=10.15.155.214
</code></pre></div><h3 id="rhel-worker-nodes"><a href="#rhel-worker-nodes" aria-hidden="true" class="header-anchor">#</a> RHEL worker nodes</h3> <p>RHEL 7.6 worker nodes can only be added to the cluster after the initial deployment. The <code>rhel_worker</code> group in the <code>hosts</code> file is used to specify the details for these worker nodes.</p> <div class="language- extra-class"><pre class="language-text"><code>[rhel_worker]
ocp-worker4   ansible_host=10.15.155.217
</code></pre></div><h2 id="supporting-nodes"><a href="#supporting-nodes" aria-hidden="true" class="header-anchor">#</a> Supporting nodes</h2> <h3 id="bootstrap-group"><a href="#bootstrap-group" aria-hidden="true" class="header-anchor">#</a> Bootstrap group</h3> <p>The cluster requires a single <code>bootstrap</code> machine to deploy the OpenShift Container Platform cluster on the three
control plane machines. You can remove the bootstrap machine after you install the cluster.</p> <div class="language- extra-class"><pre class="language-text"><code>[bootstrap]
ocp-bootstrap ansible_host=10.15.155.209
</code></pre></div><h3 id="infrastructure-group"><a href="#infrastructure-group" aria-hidden="true" class="header-anchor">#</a> Infrastructure group</h3> <p>The solution provisions DNS and DHCP services on one or two <code>infrastructure</code> nodes.  For HA puroses in a production
environment, you should configure two infrastructure nodes. For proof of concept deployments,
one node should be sufficient.</p> <div class="language- extra-class"><pre class="language-text"><code>[infrastructure]
ocp-infra1   ansible_host=10.15.155.5
ocp-infra2   ansible_host=10.15.155.6
</code></pre></div><h3 id="load-balancers"><a href="#load-balancers" aria-hidden="true" class="header-anchor">#</a> Load balancers</h3> <p>The playbooks can be used to deploy one or two layer-4 load balancers using the
information in the <code>loadbalancer</code> group. Alternatively, you can leave this group empty and
configure your own load balancers. For more information, see the section on Load balancer configuration.</p> <div class="language- extra-class"><pre class="language-text"><code>[loadbalancer]
ocp-lb1       ansible_host=10.15.155.17  frontend_ipaddr=10.15.156.40/22 api_int_preferred=
ocp-lb2       ansible_host=10.15.152.8    frontend_ipaddr=10.15.156.8/24 api_preferred=
</code></pre></div><h3 id="nfs-server"><a href="#nfs-server" aria-hidden="true" class="header-anchor">#</a> NFS server</h3> <p>The solution deploys a single  NFS server to provide persistent storage as required by the image registry.</p> <div class="language- extra-class"><pre class="language-text"><code>[nfs]
ocp-nfs       ansible_host=10.15.155.10
</code></pre></div><h2 id="groups-of-groups"><a href="#groups-of-groups" aria-hidden="true" class="header-anchor">#</a> Groups of groups</h2> <p>Some groups are combined in the <code>hosts</code> file for the convenience of the playbooks. These &quot;groups of groups&quot; include:</p> <ul><li><code>worker</code> nodes, a combination of the <code>rhcos_worker</code> and <code>rhel_worker</code> groups</li> <li><code>rhcos</code> nodes, made up of <code>bootstrap</code>, <code>master</code> and <code>rhcos_worker</code> nodes</li> <li><code>ocp</code> nodes, comprising the <code>master</code> and the <code>worker</code> nodes</li></ul> <p>These groups are used by the deployment playbooks and should not be modified.</p> <h2 id="general-recommendations"><a href="#general-recommendations" aria-hidden="true" class="header-anchor">#</a> General recommendations</h2> <ul><li><p>The recommended naming convention for cluster nodes is  &lt;&lt;cluster_name&gt;&gt;-&lt;<node-type>&gt;&lt;<node-number>&gt;, with
node numbering typically starting at 0. This gives rise to entries such as  <code>ocp-master0</code>, <code>ocp-worker3</code>, <code>ocp-lb1</code>, <code>ocp-infra0</code>, etc.</node-number></node-type></p></li> <li><p>Underscores (<code>_</code>) are not valid characters in hostnames.</p></li> <li><p>Make sure you change all the IP addresses in the sample files to your own values.</p></li> <li><p>The <code>[infrastructure]</code> group can contain one or two nodes for deploying required infrastructure components
such as DNS and DHCP. If you want High Availability (HA), you need to configure two VMs, otherwise one
will be sufficient.</p></li> <li><p>RHEL worker nodes can only be deployed after the initial cluster deployment has completed successfully. As a
result, the <code>[rhel_worker]</code> group should be empty (entries can be commented out) before running <code>site.yml</code>.</p></li> <li><p>The <code>[loadbalancer]</code> group can contain none, one or two entries. To deploy highly available load balancers,
you need to configure two VMs, otherwise one will be sufficient. You may use your own load balancing solution by
NOT configuring any VM in the [loadbalancer] group and by documenting the data structure <code>loadbalancers</code> in your
configuration file.</p></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Openshift-on-Simplivity/edit/master/docs-src/config-core/edit-hosts.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Openshift-on-Simplivity/config-core/ansible-config.html" class="prev">
          Ansible configuration
        </a></span> <span class="next"><a href="/Openshift-on-Simplivity/config-core/vmware-config.html">
          VMware configuration
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Openshift-on-Simplivity/assets/js/app.6756e726.js" defer></script><script src="/Openshift-on-Simplivity/assets/js/2.1dbc2e0f.js" defer></script><script src="/Openshift-on-Simplivity/assets/js/14.e810c29a.js" defer></script>
  </body>
</html>
