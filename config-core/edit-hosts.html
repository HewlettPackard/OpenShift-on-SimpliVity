<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Editing the hosts file | Red Hat OpenShift Container Platform on HPE SimpliVity</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/OpenShift-on-SimpliVity/assets/css/0.styles.807d69a1.css" as="style"><link rel="preload" href="/OpenShift-on-SimpliVity/assets/js/app.3e6c55a6.js" as="script"><link rel="preload" href="/OpenShift-on-SimpliVity/assets/js/2.277d45f3.js" as="script"><link rel="preload" href="/OpenShift-on-SimpliVity/assets/js/16.a33b8dac.js" as="script"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/10.40a6dc39.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/11.897d7237.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/12.a983c9e1.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/13.d4f61521.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/14.741bff84.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/15.3f79955a.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/17.30045ab4.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/18.6d6df367.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/19.fc4092bf.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/20.9e832dd3.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/21.586780f2.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/22.d12a49a2.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/23.48104bc6.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/24.201854c8.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/25.26f28cc0.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/26.9644a70e.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/27.6d852609.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/28.8a30d6b2.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/29.9f8ee577.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/3.4bd42e2f.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/30.3d9e3dae.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/31.2f555e9d.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/32.7da3608f.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/33.1328ab0d.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/34.1279b9aa.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/35.98e18359.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/36.ec3e417c.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/37.64782826.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/38.cb18649d.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/39.6f3cfac9.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/4.34e28561.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/40.4693ffaa.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/41.9c12f663.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/42.ab98bcd0.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/43.b5104dfd.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/44.f3ce8908.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/45.3521734f.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/46.2599aa88.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/47.58953e26.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/48.33f04e0a.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/49.a7a70ee0.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/5.21f30cd0.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/50.65126e2a.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/51.16e7ceb2.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/52.65bd7808.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/53.fd63e470.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/54.97f999d9.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/55.f823ee0f.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/56.87c2e607.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/57.09056cad.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/58.01f28032.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/59.991b1673.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/6.63e09d56.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/60.a64287ee.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/61.76ce5abb.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/7.e9e2e574.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/8.30b5b9b7.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/9.73359652.js">
    <link rel="stylesheet" href="/OpenShift-on-SimpliVity/assets/css/0.styles.807d69a1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/OpenShift-on-SimpliVity/" class="home-link router-link-active"><!----> <span class="site-name">Red Hat OpenShift Container Platform on HPE SimpliVity</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/OpenShift-on-SimpliVity/" class="nav-link">Home</a></div><div class="nav-item"><a href="/OpenShift-on-SimpliVity/blog/" class="nav-link">Blog</a></div> <a href="https://github.com/HewlettPackard/Openshift-on-Simplivity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/OpenShift-on-SimpliVity/" class="nav-link">Home</a></div><div class="nav-item"><a href="/OpenShift-on-SimpliVity/blog/" class="nav-link">Blog</a></div> <a href="https://github.com/HewlettPackard/Openshift-on-Simplivity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/OpenShift-on-SimpliVity/executive-summary.html" class="sidebar-link">Executive Summary</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Release Notes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Preparing the environment</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Configuring the solution</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenShift-on-SimpliVity/config-core/ansible-config.html" class="sidebar-link">Ansible configuration</a></li><li><a href="/OpenShift-on-SimpliVity/config-core/edit-hosts.html" class="active sidebar-link">Editing the hosts file</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/OpenShift-on-SimpliVity/config-core/edit-hosts.html#cluster-nodes" class="sidebar-link">Cluster nodes</a></li><li class="sidebar-sub-header"><a href="/OpenShift-on-SimpliVity/config-core/edit-hosts.html#supporting-nodes" class="sidebar-link">Supporting nodes</a></li><li class="sidebar-sub-header"><a href="/OpenShift-on-SimpliVity/config-core/edit-hosts.html#groups-of-groups" class="sidebar-link">Groups of groups</a></li><li class="sidebar-sub-header"><a href="/OpenShift-on-SimpliVity/config-core/edit-hosts.html#general-recommendations" class="sidebar-link">General recommendations</a></li></ul></li><li><a href="/OpenShift-on-SimpliVity/config-core/vmware-config.html" class="sidebar-link">VMware configuration</a></li><li><a href="/OpenShift-on-SimpliVity/config-core/networking-config.html" class="sidebar-link">Networking configuration</a></li><li><a href="/OpenShift-on-SimpliVity/config-core/redhat-config.html" class="sidebar-link">Red Hat Network configuration</a></li><li><a href="/OpenShift-on-SimpliVity/config-core/openshift-config.html" class="sidebar-link">OpenShift configuration</a></li><li><a href="/OpenShift-on-SimpliVity/config-core/lbs-config.html" class="sidebar-link">Load balancer configuration</a></li><li><a href="/OpenShift-on-SimpliVity/config-core/group-vars.html" class="sidebar-link">Inventory group variables</a></li><li><a href="/OpenShift-on-SimpliVity/config-core/edit-vault.html" class="sidebar-link">Protecting sensitive information</a></li><li><a href="/OpenShift-on-SimpliVity/config-core/vars-sample.html" class="sidebar-link">Sample vars file</a></li><li><a href="/OpenShift-on-SimpliVity/config-core/vault-sample.html" class="sidebar-link">Sample vault file</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Overview of the playbooks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Post deployment tasks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Configuring storage</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Adding worker nodes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Deploying cluster logging</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Backup and restore</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Appendices</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="editing-the-hosts-file"><a href="#editing-the-hosts-file" aria-hidden="true" class="header-anchor">#</a> Editing the hosts file</h1> <p>The <code>hosts</code> file consists of definitions for:</p> <ul><li><code>Cluster nodes</code> including masters and workers</li> <li><code>Supporting nodes</code> including a bootstrap node, support nodes for DNS and DHCP, and an NFS server</li> <li><code>Groupings of nodes</code> such as all cluster nodes, all CoreOS nodes, all worker nodes, etc.</li></ul> <h2 id="cluster-nodes"><a href="#cluster-nodes" aria-hidden="true" class="header-anchor">#</a> Cluster nodes</h2> <h3 id="master-nodes"><a href="#master-nodes" aria-hidden="true" class="header-anchor">#</a> Master nodes</h3> <p>A minimum of three master nodes are required.</p> <div class="language- extra-class"><pre class="language-text"><code>[master]
ocp-master0   ansible_host=10.15.155.210
ocp-master1   ansible_host=10.15.155.211
ocp-master2   ansible_host=10.15.155.212
</code></pre></div><h3 id="coreos-worker-nodes"><a href="#coreos-worker-nodes" aria-hidden="true" class="header-anchor">#</a> CoreOS worker nodes</h3> <p>A minimum of two CoreOS worker nodes must be specified in the <code>rhcos_worker</code> group
for the initial cluster deployment.</p> <div class="language- extra-class"><pre class="language-text"><code>[rhcos_worker]
ocp-worker0   ansible_host=10.15.155.213
ocp-worker1   ansible_host=10.15.155.214
</code></pre></div><h3 id="red-hat-enterprise-linux-7-6-worker-nodes"><a href="#red-hat-enterprise-linux-7-6-worker-nodes" aria-hidden="true" class="header-anchor">#</a> Red Hat Enterprise Linux 7.6 worker nodes</h3> <p>RHEL 7.6 worker nodes can only be added to the  OCP cluster <strong>after the cluster has been deployed</strong>.
The <code>rhel_worker</code> group in the <code>hosts</code> file is used to specify the details for these worker nodes.
Any entries in this group must be commented out during the initial cluster deployment.</p> <div class="language- extra-class"><pre class="language-text"><code>[rhel_worker]
ocp-worker4   ansible_host=10.15.155.217
</code></pre></div><h2 id="supporting-nodes"><a href="#supporting-nodes" aria-hidden="true" class="header-anchor">#</a> Supporting nodes</h2> <h3 id="bootstrap-group"><a href="#bootstrap-group" aria-hidden="true" class="header-anchor">#</a> Bootstrap group</h3> <p>The cluster requires a single <code>bootstrap</code> machine to deploy the OpenShift Container Platform cluster on
the three master nodes. You can safely remove the bootstrap machine from vCenter after the cluster has deployed.</p> <div class="language- extra-class"><pre class="language-text"><code>[bootstrap]
ocp-bootstrap ansible_host=10.15.155.209
</code></pre></div><h3 id="support-group"><a href="#support-group" aria-hidden="true" class="header-anchor">#</a> Support group</h3> <p>The solution provisions DNS and DHCP services on one or two <code>support</code> nodes.  For High Availability (HA)
purposes in a production environment, you should configure two support nodes.
For proof of concept deployments, one node should be sufficient.</p> <div class="language- extra-class"><pre class="language-text"><code>[support]
ocp-support1   ansible_host=10.15.155.5
ocp-support2   ansible_host=10.15.155.6
</code></pre></div><h3 id="load-balancers"><a href="#load-balancers" aria-hidden="true" class="header-anchor">#</a> Load balancers</h3> <p>The playbooks can be used to deploy one or two load balancers using the
information in the <code>loadbalancer</code> group. Alternatively, you can leave this group empty and
configure your own load balancers. For more information, see the section on Load balancer configuration.</p> <div class="language- extra-class"><pre class="language-text"><code>[loadbalancer]
ocp-lb1       ansible_host=10.15.155.17  frontend_ipaddr=10.15.156.40/22 api_int_preferred=
ocp-lb2       ansible_host=10.15.152.8   frontend_ipaddr=10.15.156.8/24 api_preferred=
</code></pre></div><h3 id="nfs-server"><a href="#nfs-server" aria-hidden="true" class="header-anchor">#</a> NFS server</h3> <p>The solution deploys a single NFS server to provide persistent storage as required by the OCP image registry.</p> <div class="language- extra-class"><pre class="language-text"><code>[nfs]
ocp-nfs       ansible_host=10.15.155.10
</code></pre></div><h2 id="groups-of-groups"><a href="#groups-of-groups" aria-hidden="true" class="header-anchor">#</a> Groups of groups</h2> <p>Some groups are combined in the <code>hosts</code> file for the convenience of the playbooks. These &quot;groups of groups&quot; include:</p> <ul><li><code>worker</code> group, a combination of the <code>rhcos_worker</code> and <code>rhel_worker</code> groups</li> <li><code>rhcos</code> group, made up of <code>bootstrap</code>, <code>master</code> and <code>rhcos_worker</code> nodes</li> <li><code>ocp</code> group, comprising the <code>master</code> and the <code>worker</code> nodes</li></ul> <p>These groups are used by the deployment playbooks and should not be modified.</p> <h2 id="general-recommendations"><a href="#general-recommendations" aria-hidden="true" class="header-anchor">#</a> General recommendations</h2> <ul><li><p>The recommended naming convention for cluster nodes is  <code>&lt;&lt;cluster_name&gt;&gt;</code>-<code>&lt;&lt;node-type&gt;&gt;&lt;&lt;node-number&gt;&gt;</code>, with
node numbering typically starting at 0. This gives rise to entries such as  <code>ocp-master0</code>, <code>ocp-worker3</code>,
<code>ocp-lb1</code>, <code>ocp-support0</code>, etc.</p></li> <li><p>Underscores (<code>_</code>) are not valid characters in hostnames.</p></li> <li><p>Make sure you change all the IP addresses in the sample files to match your environment.</p></li> <li><p>The <code>[support]</code> group can contain one or two nodes for deploying required support components
such as DNS and DHCP. If you want High Availability (HA), you need to configure two VMs, otherwise one
will be sufficient.</p></li> <li><p>RHEL 7.6 worker nodes can only be deployed <strong>after the initial cluster deployment has completed successfully</strong>. As a
result, the <code>[rhel_worker]</code> group should be empty (entries can be commented out) before running or
re-running the <code>site.yml</code> playbook.</p></li> <li><p>The <code>[loadbalancer]</code> group can contain zero, one or two entries. To deploy highly available load balancers,
you need to configure two VMs, otherwise one will be sufficient. You may use your own load balancing solution by
leaving the <code>[loadbalancer]</code> inventory group empty and configuring the <code>loadbalancers</code> data structure
(in the <code>group_vars/all/vars.yml</code> variables file) to reflect your load balancer configuration.</p></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://gitlab.com/gmcgoldrick/openshift-on-simplivity/edit/master/docs-src/config-core/edit-hosts.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/OpenShift-on-SimpliVity/config-core/ansible-config.html" class="prev">Ansible configuration</a></span> <span class="next"><a href="/OpenShift-on-SimpliVity/config-core/vmware-config.html">VMware configuration</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/OpenShift-on-SimpliVity/assets/js/app.3e6c55a6.js" defer></script><script src="/OpenShift-on-SimpliVity/assets/js/2.277d45f3.js" defer></script><script src="/OpenShift-on-SimpliVity/assets/js/16.a33b8dac.js" defer></script>
  </body>
</html>
