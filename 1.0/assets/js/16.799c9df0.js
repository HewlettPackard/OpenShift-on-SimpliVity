(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{258:function(e,o,r){"use strict";r.r(o);var s=r(0),t=Object(s.a)({},(function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"editing-the-hosts-file"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#editing-the-hosts-file","aria-hidden":"true"}},[e._v("#")]),e._v(" Editing the hosts file")]),e._v(" "),r("p",[e._v("The "),r("code",[e._v("hosts")]),e._v(" file consists of definitions for:")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("Cluster nodes")]),e._v(" including masters and workers")]),e._v(" "),r("li",[r("code",[e._v("Supporting nodes")]),e._v(" including a bootstrap node, support nodes for DNS and DHCP, and an NFS server")]),e._v(" "),r("li",[r("code",[e._v("Groupings of nodes")]),e._v(" such as all cluster nodes, all CoreOS nodes, all worker nodes, etc.")])]),e._v(" "),r("h2",{attrs:{id:"cluster-nodes"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#cluster-nodes","aria-hidden":"true"}},[e._v("#")]),e._v(" Cluster nodes")]),e._v(" "),r("h3",{attrs:{id:"master-nodes"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#master-nodes","aria-hidden":"true"}},[e._v("#")]),e._v(" Master nodes")]),e._v(" "),r("p",[e._v("A minimum of three master nodes are required.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[master]\nocp-master0   ansible_host=10.15.155.210\nocp-master1   ansible_host=10.15.155.211\nocp-master2   ansible_host=10.15.155.212\n")])])]),r("h3",{attrs:{id:"coreos-worker-nodes"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coreos-worker-nodes","aria-hidden":"true"}},[e._v("#")]),e._v(" CoreOS worker nodes")]),e._v(" "),r("p",[e._v("A minimum of two CoreOS worker nodes must be specified in the "),r("code",[e._v("rhcos_worker")]),e._v(" group\nfor the initial cluster deployment.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[rhcos_worker]\nocp-worker0   ansible_host=10.15.155.213\nocp-worker1   ansible_host=10.15.155.214\n")])])]),r("h3",{attrs:{id:"red-hat-enterprise-linux-7-6-worker-nodes"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#red-hat-enterprise-linux-7-6-worker-nodes","aria-hidden":"true"}},[e._v("#")]),e._v(" Red Hat Enterprise Linux 7.6 worker nodes")]),e._v(" "),r("p",[e._v("RHEL 7.6 worker nodes can only be added to the  OCP cluster "),r("strong",[e._v("after the cluster has been deployed")]),e._v(".\nThe "),r("code",[e._v("rhel_worker")]),e._v(" group in the "),r("code",[e._v("hosts")]),e._v(" file is used to specify the details for these worker nodes.\nAny entries in this group must be commented out during the initial cluster deployment.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[rhel_worker]\nocp-worker4   ansible_host=10.15.155.217\n")])])]),r("h2",{attrs:{id:"supporting-nodes"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#supporting-nodes","aria-hidden":"true"}},[e._v("#")]),e._v(" Supporting nodes")]),e._v(" "),r("h3",{attrs:{id:"bootstrap-group"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#bootstrap-group","aria-hidden":"true"}},[e._v("#")]),e._v(" Bootstrap group")]),e._v(" "),r("p",[e._v("The cluster requires a single "),r("code",[e._v("bootstrap")]),e._v(" machine to deploy the OpenShift Container Platform cluster on\nthe three master nodes. You can safely remove the bootstrap machine from vCenter after the cluster has deployed.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[bootstrap]\nocp-bootstrap ansible_host=10.15.155.209\n")])])]),r("h3",{attrs:{id:"support-group"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#support-group","aria-hidden":"true"}},[e._v("#")]),e._v(" Support group")]),e._v(" "),r("p",[e._v("The solution provisions DNS and DHCP services on one or two "),r("code",[e._v("support")]),e._v(" nodes.  For High Availability (HA)\npurposes in a production environment, you should configure two support nodes.\nFor proof of concept deployments, one node should be sufficient.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[support]\nocp-support1   ansible_host=10.15.155.5\nocp-support2   ansible_host=10.15.155.6\n")])])]),r("h3",{attrs:{id:"load-balancers"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#load-balancers","aria-hidden":"true"}},[e._v("#")]),e._v(" Load balancers")]),e._v(" "),r("p",[e._v("The playbooks can be used to deploy one or two load balancers using the\ninformation in the "),r("code",[e._v("loadbalancer")]),e._v(" group. Alternatively, you can leave this group empty and\nconfigure your own load balancers. For more information, see the section on Load balancer configuration.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[loadbalancer]\nocp-lb1       ansible_host=10.15.155.17  frontend_ipaddr=10.15.156.40/22 api_int_preferred=\nocp-lb2       ansible_host=10.15.152.8   frontend_ipaddr=10.15.156.8/24 api_preferred=\n")])])]),r("h3",{attrs:{id:"nfs-server"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#nfs-server","aria-hidden":"true"}},[e._v("#")]),e._v(" NFS server")]),e._v(" "),r("p",[e._v("The solution deploys a single NFS server to provide persistent storage as required by the OCP image registry.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[nfs]\nocp-nfs       ansible_host=10.15.155.10\n")])])]),r("h2",{attrs:{id:"groups-of-groups"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#groups-of-groups","aria-hidden":"true"}},[e._v("#")]),e._v(" Groups of groups")]),e._v(" "),r("p",[e._v("Some groups are combined in the "),r("code",[e._v("hosts")]),e._v(' file for the convenience of the playbooks. These "groups of groups" include:')]),e._v(" "),r("ul",[r("li",[r("code",[e._v("worker")]),e._v(" group, a combination of the "),r("code",[e._v("rhcos_worker")]),e._v(" and "),r("code",[e._v("rhel_worker")]),e._v(" groups")]),e._v(" "),r("li",[r("code",[e._v("rhcos")]),e._v(" group, made up of "),r("code",[e._v("bootstrap")]),e._v(", "),r("code",[e._v("master")]),e._v(" and "),r("code",[e._v("rhcos_worker")]),e._v(" nodes")]),e._v(" "),r("li",[r("code",[e._v("ocp")]),e._v(" group, comprising the "),r("code",[e._v("master")]),e._v(" and the "),r("code",[e._v("worker")]),e._v(" nodes")])]),e._v(" "),r("p",[e._v("These groups are used by the deployment playbooks and should not be modified.")]),e._v(" "),r("h2",{attrs:{id:"general-recommendations"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#general-recommendations","aria-hidden":"true"}},[e._v("#")]),e._v(" General recommendations")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("The recommended naming convention for cluster nodes is  "),r("code",[e._v("<<cluster_name>>")]),e._v("-"),r("code",[e._v("<<node-type>><<node-number>>")]),e._v(", with\nnode numbering typically starting at 0. This gives rise to entries such as  "),r("code",[e._v("ocp-master0")]),e._v(", "),r("code",[e._v("ocp-worker3")]),e._v(",\n"),r("code",[e._v("ocp-lb1")]),e._v(", "),r("code",[e._v("ocp-support0")]),e._v(", etc.")])]),e._v(" "),r("li",[r("p",[e._v("Underscores ("),r("code",[e._v("_")]),e._v(") are not valid characters in hostnames.")])]),e._v(" "),r("li",[r("p",[e._v("Make sure you change all the IP addresses in the sample files to match your environment.")])]),e._v(" "),r("li",[r("p",[e._v("The "),r("code",[e._v("[support]")]),e._v(" group can contain one or two nodes for deploying required support components\nsuch as DNS and DHCP. If you want High Availability (HA), you need to configure two VMs, otherwise one\nwill be sufficient.")])]),e._v(" "),r("li",[r("p",[e._v("RHEL 7.6 worker nodes can only be deployed "),r("strong",[e._v("after the initial cluster deployment has completed successfully")]),e._v(". As a\nresult, the "),r("code",[e._v("[rhel_worker]")]),e._v(" group should be empty (entries can be commented out) before running or\nre-running the "),r("code",[e._v("site.yml")]),e._v(" playbook.")])]),e._v(" "),r("li",[r("p",[e._v("The "),r("code",[e._v("[loadbalancer]")]),e._v(" group can contain zero, one or two entries. To deploy highly available load balancers,\nyou need to configure two VMs, otherwise one will be sufficient. You may use your own load balancing solution by\nleaving the "),r("code",[e._v("[loadbalancer]")]),e._v(" inventory group empty and configuring the "),r("code",[e._v("loadbalancers")]),e._v(" data structure\n(in the "),r("code",[e._v("group_vars/all/vars.yml")]),e._v(" variables file) to reflect your load balancer configuration.")])])])])}),[],!1,null,null,null);o.default=t.exports}}]);