(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{232:function(e,t,a){"use strict";a.r(t);var n=a(0),r=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"high-availability"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#high-availability","aria-hidden":"true"}},[e._v("#")]),e._v(" High availability")]),e._v(" "),a("p",[e._v("Anti-affinity rules are created to ensure that VMs performing the same role are kept apart and run on different\nunderlying ESXi hosts.")]),e._v(" "),a("h2",{attrs:{id:"control-plane"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#control-plane","aria-hidden":"true"}},[e._v("#")]),e._v(" Control plane")]),e._v(" "),a("p",[e._v("The default configuration for the solution is three master nodes running on three separate ESXi hosts. The control plane VMs  are kept apart using an anti-affinity rule named")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("{{cluster_name}}-master-anti-affinity-rule-001\n")])])]),a("p",[e._v("where "),a("code",[e._v("cluster_name")]),e._v(" is the name of your cluster, as defined in the vars file.")]),e._v(" "),a("h2",{attrs:{id:"deploying-two-support-nodes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploying-two-support-nodes","aria-hidden":"true"}},[e._v("#")]),e._v(" Deploying two support nodes")]),e._v(" "),a("p",[e._v("You can configure the internal DNS and DHCP services to run on two virtual machines to provide redundancy. These two VMs are guaranteed  to run on  two different ESXi hosts through using an anti-affinity rule named")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("{{cluster_name}}-support-anti-affinity-rule-001\n")])])]),a("p",[e._v("where "),a("code",[e._v("cluster_name")]),e._v(" is the name of your cluster, as defined in the vars file.")]),e._v(" "),a("h2",{attrs:{id:"deploying-two-load-balancers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploying-two-load-balancers","aria-hidden":"true"}},[e._v("#")]),e._v(" Deploying two load balancers")]),e._v(" "),a("p",[e._v("You can configure the playbooks to deploy  two load balancers in an active-active configuration to provide highly-available access. These nodes run "),a("code",[e._v("keepalived")]),e._v(" and HAproxy. The load balancers are hosted on two VMs that are guaranteed to run on  two different ESXi host through using an anti-affinity rule named")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("{{cluster_name}}-loadbalancer-anti-affinity-rule-001\n")])])]),a("p",[e._v("where "),a("code",[e._v("cluster_name")]),e._v(" is the name of your cluster, as defined in the vars file.")]),e._v(" "),a("h2",{attrs:{id:"deploying-cluster-logging"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploying-cluster-logging","aria-hidden":"true"}},[e._v("#")]),e._v(" Deploying cluster logging")]),e._v(" "),a("p",[e._v("Cluster logging is very resource intensive, so the sizing requirements are increased compared to other nodes\nin the cluster. The playbooks do not  create  anti-affinity rules for the logging VMs so you must ensure that they\nrun on different ESXi hosts. This deficiency")]),e._v(" "),a("p",[e._v("Cluster logging is not deployed by default. Deployment of the logging stack and how to schedule it\non nodes with the required resources is described in the section "),a("code",[e._v("Deploying cluster logging")]),e._v(".")])])}),[],!1,null,null,null);t.default=r.exports}}]);