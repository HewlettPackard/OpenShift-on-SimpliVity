(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{258:function(e,a,n){"use strict";n.r(a);var s=n(0),t=Object(s.a)({},(function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"appendix-b-sample-ldap-cr"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#appendix-b-sample-ldap-cr","aria-hidden":"true"}},[e._v("#")]),e._v(" Appendix B: Sample LDAP CR")]),e._v(" "),n("p",[e._v("A sample Custom Resource (CR), "),n("code",[e._v("playbooks/roles/ldap/vars/ldap_cr.yml")]),e._v(", is included in the solution. It shows the parameters and example values for an LDAP identity provider.")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('apiVersion: config.openshift.io/v1\nkind: OAuth\nmetadata:\n  name: cluster\nspec:\n  identityProviders:\n  - name: msad\n    mappingMethod: claim \n    type: LDAP\n    ldap:\n      attributes:\n        id: \n        - name\n        email: \n        - UserPrincipalName\n        name: \n        - cn\n        preferredUsername: \n        - sAMAccountName\n      bindDN: "{{ ldap_bind_user_dn }}"\n      bindPassword: \n        name: ldap-secret\n      ca: \n        name: ca-config-map\n      insecure: false \n      url: "ldaps://mars-adds.am2.cloudra.local/CN=Users,DC=am2,DC=cloudra,DC=local?sAMAccountName??(objectClass=person)"\n')])])]),n("ul",[n("li",[n("p",[e._v("The identity provider name is prefixed to the returned user ID to form an identity name. In this instance, the example name "),n("code",[e._v("msad")]),e._v(" is used to indicate Microsoft Active Directory is being used. After the identity provider has been set up, you can use the "),n("code",[e._v("oc get identities")]),e._v(" command to see the prefix in use:")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ oc get identities\nNAME                            IDP NAME   IDP USER NAME              USER NAME     \nmsad:YWRvY3AgYWRtaW4x           msad       YWRvY3AgYWRtaW4x           adocpadmin1   \nmsad:YWRvY3AgdXNlcjE            msad       YWRvY3AgdXNlcjE            adocpuser1\n")])])]),n("p",[e._v("The identity provider name is also displayed as an option when logging in to the web console.")])]),e._v(" "),n("li",[n("p",[e._v("The "),n("code",[e._v("bindDN")]),e._v(" parameter is the name of the LDAP user required to perform the search. This value is actually defined in the "),n("code",[e._v("group_vars\\all\\vars.yml")]),e._v(" file using the variable "),n("code",[e._v("ldap_bind_user_dn")]),e._v(".")])]),e._v(" "),n("li",[n("p",[e._v("The "),n("code",[e._v("bindPassword")]),e._v(" is stored in a secret which is created when you run the "),n("code",[e._v("playbooks\\ldap.yml")]),e._v(" playbook. The underlying password itself should be strored in "),n("code",[e._v("group_vars/all/vault.yml")]),e._v(" as the value of the variable "),n("code",[e._v("vault.ldap_bind_user_password")]),e._v(".")])])])])}),[],!1,null,null,null);a.default=t.exports}}]);