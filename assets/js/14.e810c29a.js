(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{242:function(e,r,o){"use strict";o.r(r);var s=o(0),a=Object(s.a)({},(function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"editing-the-hosts-file"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#editing-the-hosts-file","aria-hidden":"true"}},[e._v("#")]),e._v(" Editing the hosts file")]),e._v(" "),o("p",[e._v("The "),o("code",[e._v("hosts")]),e._v(" file consists of definitions for:")]),e._v(" "),o("ul",[o("li",[e._v("Cluster nodes, including masters and workers")]),e._v(" "),o("li",[e._v("Supporting nodes, including a bootstrap node, infrastructure nodes for DNS and DSCP, and an NFS server")]),e._v(" "),o("li",[e._v("Groupings of nodes, such as all cluster nodes, all CoreOS nodes, all worker nodes, etc.")])]),e._v(" "),o("h2",{attrs:{id:"cluster-nodes"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#cluster-nodes","aria-hidden":"true"}},[e._v("#")]),e._v(" Cluster nodes")]),e._v(" "),o("h3",{attrs:{id:"master-nodes"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#master-nodes","aria-hidden":"true"}},[e._v("#")]),e._v(" Master nodes")]),e._v(" "),o("p",[e._v("A minimum of three master nodes are required.")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("[master]\nocp-master0   ansible_host=10.15.155.210\nocp-master1   ansible_host=10.15.155.211\nocp-master2   ansible_host=10.15.155.212\n")])])]),o("h3",{attrs:{id:"coreos-worker-nodes"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#coreos-worker-nodes","aria-hidden":"true"}},[e._v("#")]),e._v(" CoreOS worker nodes")]),e._v(" "),o("p",[e._v("A minimum of two CoreOS worker nodes must be specified in the "),o("code",[e._v("rhcos_worker")]),e._v(" group\nfor the initial cluster deployment.")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("[rhcos_worker]\nocp-worker0   ansible_host=10.15.155.213\nocp-worker1   ansible_host=10.15.155.214\n")])])]),o("h3",{attrs:{id:"rhel-worker-nodes"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#rhel-worker-nodes","aria-hidden":"true"}},[e._v("#")]),e._v(" RHEL worker nodes")]),e._v(" "),o("p",[e._v("RHEL 7.6 worker nodes can only be added to the cluster after the initial deployment. The "),o("code",[e._v("rhel_worker")]),e._v(" group in the "),o("code",[e._v("hosts")]),e._v(" file is used to specify the details for these worker nodes.")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("[rhel_worker]\nocp-worker4   ansible_host=10.15.155.217\n")])])]),o("h2",{attrs:{id:"supporting-nodes"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#supporting-nodes","aria-hidden":"true"}},[e._v("#")]),e._v(" Supporting nodes")]),e._v(" "),o("h3",{attrs:{id:"bootstrap-group"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#bootstrap-group","aria-hidden":"true"}},[e._v("#")]),e._v(" Bootstrap group")]),e._v(" "),o("p",[e._v("The cluster requires a single "),o("code",[e._v("bootstrap")]),e._v(" machine to deploy the OpenShift Container Platform cluster on the three\ncontrol plane machines. You can remove the bootstrap machine after you install the cluster.")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("[bootstrap]\nocp-bootstrap ansible_host=10.15.155.209\n")])])]),o("h3",{attrs:{id:"infrastructure-group"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#infrastructure-group","aria-hidden":"true"}},[e._v("#")]),e._v(" Infrastructure group")]),e._v(" "),o("p",[e._v("The solution provisions DNS and DHCP services on one or two "),o("code",[e._v("infrastructure")]),e._v(" nodes.  For HA puroses in a production\nenvironment, you should configure two infrastructure nodes. For proof of concept deployments,\none node should be sufficient.")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("[infrastructure]\nocp-infra1   ansible_host=10.15.155.5\nocp-infra2   ansible_host=10.15.155.6\n")])])]),o("h3",{attrs:{id:"load-balancers"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#load-balancers","aria-hidden":"true"}},[e._v("#")]),e._v(" Load balancers")]),e._v(" "),o("p",[e._v("The playbooks can be used to deploy one or two layer-4 load balancers using the\ninformation in the "),o("code",[e._v("loadbalancer")]),e._v(" group. Alternatively, you can leave this group empty and\nconfigure your own load balancers. For more information, see the section on Load balancer configuration.")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("[loadbalancer]\nocp-lb1       ansible_host=10.15.155.17  frontend_ipaddr=10.15.156.40/22 api_int_preferred=\nocp-lb2       ansible_host=10.15.152.8    frontend_ipaddr=10.15.156.8/24 api_preferred=\n")])])]),o("h3",{attrs:{id:"nfs-server"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#nfs-server","aria-hidden":"true"}},[e._v("#")]),e._v(" NFS server")]),e._v(" "),o("p",[e._v("The solution deploys a single  NFS server to provide persistent storage as required by the image registry.")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("[nfs]\nocp-nfs       ansible_host=10.15.155.10\n")])])]),o("h2",{attrs:{id:"groups-of-groups"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#groups-of-groups","aria-hidden":"true"}},[e._v("#")]),e._v(" Groups of groups")]),e._v(" "),o("p",[e._v("Some groups are combined in the "),o("code",[e._v("hosts")]),e._v(' file for the convenience of the playbooks. These "groups of groups" include:')]),e._v(" "),o("ul",[o("li",[o("code",[e._v("worker")]),e._v(" nodes, a combination of the "),o("code",[e._v("rhcos_worker")]),e._v(" and "),o("code",[e._v("rhel_worker")]),e._v(" groups")]),e._v(" "),o("li",[o("code",[e._v("rhcos")]),e._v(" nodes, made up of "),o("code",[e._v("bootstrap")]),e._v(", "),o("code",[e._v("master")]),e._v(" and "),o("code",[e._v("rhcos_worker")]),e._v(" nodes")]),e._v(" "),o("li",[o("code",[e._v("ocp")]),e._v(" nodes, comprising the "),o("code",[e._v("master")]),e._v(" and the "),o("code",[e._v("worker")]),e._v(" nodes")])]),e._v(" "),o("p",[e._v("These groups are used by the deployment playbooks and should not be modified.")]),e._v(" "),o("h2",{attrs:{id:"general-recommendations"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#general-recommendations","aria-hidden":"true"}},[e._v("#")]),e._v(" General recommendations")]),e._v(" "),o("ul",[o("li",[o("p",[e._v("The recommended naming convention for cluster nodes is  <<cluster_name>>-<"),o("node-type",[e._v("><"),o("node-number",[e._v(">, with\nnode numbering typically starting at 0. This gives rise to entries such as  "),o("code",[e._v("ocp-master0")]),e._v(", "),o("code",[e._v("ocp-worker3")]),e._v(", "),o("code",[e._v("ocp-lb1")]),e._v(", "),o("code",[e._v("ocp-infra0")]),e._v(", etc.")])],1)],1)]),e._v(" "),o("li",[o("p",[e._v("Underscores ("),o("code",[e._v("_")]),e._v(") are not valid characters in hostnames.")])]),e._v(" "),o("li",[o("p",[e._v("Make sure you change all the IP addresses in the sample files to your own values.")])]),e._v(" "),o("li",[o("p",[e._v("The "),o("code",[e._v("[infrastructure]")]),e._v(" group can contain one or two nodes for deploying required infrastructure components\nsuch as DNS and DHCP. If you want High Availability (HA), you need to configure two VMs, otherwise one\nwill be sufficient.")])]),e._v(" "),o("li",[o("p",[e._v("RHEL worker nodes can only be deployed after the initial cluster deployment has completed successfully. As a\nresult, the "),o("code",[e._v("[rhel_worker]")]),e._v(" group should be empty (entries can be commented out) before running "),o("code",[e._v("site.yml")]),e._v(".")])]),e._v(" "),o("li",[o("p",[e._v("The "),o("code",[e._v("[loadbalancer]")]),e._v(" group can contain none, one or two entries. To deploy highly available load balancers,\nyou need to configure two VMs, otherwise one will be sufficient. You may use your own load balancing solution by\nNOT configuring any VM in the [loadbalancer] group and by documenting the data structure "),o("code",[e._v("loadbalancers")]),e._v(" in your\nconfiguration file.")])])])])}),[],!1,null,null,null);r.default=a.exports}}]);