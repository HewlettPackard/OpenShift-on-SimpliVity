<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Create the Ansible node on Fedora | Red Hat OpenShift Container Platform on HPE SimpliVity</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/OpenShift-on-SimpliVity/assets/css/0.styles.807d69a1.css" as="style"><link rel="preload" href="/OpenShift-on-SimpliVity/assets/js/app.39bb32a3.js" as="script"><link rel="preload" href="/OpenShift-on-SimpliVity/assets/js/2.277d45f3.js" as="script"><link rel="preload" href="/OpenShift-on-SimpliVity/assets/js/36.d021de04.js" as="script"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/10.21eed475.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/11.41dd5a05.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/12.eb3540e0.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/13.f00979a5.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/14.a7bdaeb3.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/15.c654e37b.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/16.c03ab645.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/17.05f0deae.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/18.2b47804c.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/19.73260070.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/20.efaa92a0.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/21.41916a37.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/22.1293dbf3.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/23.21612a94.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/24.16b8cae1.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/25.85b419e5.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/26.2ac0f9c2.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/27.fa5f9db8.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/28.f76191e9.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/29.979b8d7e.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/3.4bd42e2f.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/30.9db99eb3.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/31.3c2b772a.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/32.f359a4f4.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/33.cb6dcd41.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/34.7d4d1cf8.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/35.a3727d34.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/37.355d650b.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/38.99d754bc.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/39.a9b41df8.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/4.1a14dc42.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/40.7869c7d5.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/41.13df235d.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/42.a9f1ce75.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/43.43d1badd.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/44.9ba74e5a.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/45.ebacf737.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/46.a3b3ff6e.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/47.68f67b86.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/48.778e2cbd.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/49.4077bd45.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/5.a1e89e27.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/50.05c89f5d.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/51.094e129b.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/52.6c0ad1c2.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/53.a08d03c1.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/54.7c2fb07f.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/55.97dea1fe.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/56.9e6ffc21.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/57.6c6cbf01.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/6.e3c574e6.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/7.ec149a58.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/8.56c9e3bc.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/9.73359652.js">
    <link rel="stylesheet" href="/OpenShift-on-SimpliVity/assets/css/0.styles.807d69a1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/OpenShift-on-SimpliVity/" class="home-link router-link-active"><!----> <span class="site-name">Red Hat OpenShift Container Platform on HPE SimpliVity</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/OpenShift-on-SimpliVity/" class="nav-link">Home</a></div><div class="nav-item"><a href="/OpenShift-on-SimpliVity/blog/" class="nav-link">Blog</a></div> <a href="https://github.com/HewlettPackard/Openshift-on-Simplivity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/OpenShift-on-SimpliVity/" class="nav-link">Home</a></div><div class="nav-item"><a href="/OpenShift-on-SimpliVity/blog/" class="nav-link">Blog</a></div> <a href="https://github.com/HewlettPackard/Openshift-on-Simplivity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/OpenShift-on-SimpliVity/executive-summary.html" class="sidebar-link">Executive Summary</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Release Notes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Preparing the environment</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenShift-on-SimpliVity/preparing/verify-prereqs.html" class="sidebar-link">Verify prerequisites</a></li><li><a href="/OpenShift-on-SimpliVity/preparing/ansible-fedora.html" class="active sidebar-link">Create the Ansible node on Fedora</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/OpenShift-on-SimpliVity/preparing/ansible-fedora.html#create-the-fedora-vm" class="sidebar-link">Create the Fedora VM</a></li><li class="sidebar-sub-header"><a href="/OpenShift-on-SimpliVity/preparing/ansible-fedora.html#password-less-sudo" class="sidebar-link">Password-less sudo</a></li><li class="sidebar-sub-header"><a href="/OpenShift-on-SimpliVity/preparing/ansible-fedora.html#install-ansible-and-required-modules" class="sidebar-link">Install Ansible and required modules</a></li></ul></li><li><a href="/OpenShift-on-SimpliVity/preparing/rhel.html" class="sidebar-link">Create the Red Hat Linux template</a></li><li><a href="/OpenShift-on-SimpliVity/preparing/openshift-artifacts.html" class="sidebar-link">OpenShift artifacts</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Configuring the solution</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Overview of the playbooks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Post deployment tasks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Configuring storage</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Adding worker nodes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Deploying cluster logging</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Backup and restore</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/OpenShift-on-SimpliVity/appendices/appendix-a.html" class="sidebar-link">Appendix A: Bill of Materials</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="create-the-ansible-node-on-fedora"><a href="#create-the-ansible-node-on-fedora" aria-hidden="true" class="header-anchor">#</a> Create the Ansible node on Fedora</h1> <p>It is recommended that you deploy the Ansible controller on Fedora, to take advantage of the built-in support for
Python 3. The solution requires Fedora 29 and Ansible 2.8.1 and the node should be directly connected to
the proxy-free VLAN. It may be possible to run the playbooks on other operating systems including RHEL and CentOS but
the playbooks have only been tested on Fedora. In addition to Python 3 and Ansible 2.8.1, the following packages must be installed:
<code>python3-netaddr python3-requests python3-pyvmomi python3-pip</code>.</p> <p>The playbooks should be run from a non-privileged account. HPE recommends that you use an account named <code>core</code> as
this will ensure consistency with deployed CoreOS machines that have a built-in account <code>core</code>. In addition, any
non-CoreOS VMs created by the playbooks will have a user account created with the same name as the user on
the Ansible controller node that ran the playbooks.</p> <h2 id="create-the-fedora-vm"><a href="#create-the-fedora-vm" aria-hidden="true" class="header-anchor">#</a> Create the Fedora VM</h2> <p>Create a Virtual Machine with the following characteristics:</p> <ul><li><strong>Guest OS:</strong> Red Hat Fedora Server 29 (64-bit)</li> <li><strong>Disk:</strong> 50G (thin provisioning)</li> <li><strong>CPU:</strong> 2</li> <li><strong>RAM:</strong> 4 GB</li> <li><strong>Ethernet Adapter:</strong> VMXNET3, connected to your Ansible or management network</li></ul> <p>Install Fedora Server 29 using the x64 64-bit ISO image.
In the <code>Software Selection</code> section, choose:</p> <ul><li><strong>Base Environment:</strong> Fedora Server Edition</li> <li><strong>Add-Ons for Selected Environment:</strong> Guest Agent</li></ul> <p>Select your language, keyboard layout, and timezone settings and re-boot when the installation finishes. Configure your networking and check your connectivity before moving on to the next section.</p> <h2 id="password-less-sudo"><a href="#password-less-sudo" aria-hidden="true" class="header-anchor">#</a> Password-less sudo</h2> <p>Configure password-less <code>sudo</code> for the <code>core</code> user on the Ansible controller node by logging in
as <code>root</code> and issuing the command:</p> <div class="language- extra-class"><pre class="language-text"><code>$ usermod -a -G wheel core
</code></pre></div><p>The default <code>/etc/sudoers</code> file contains two lines for the group <code>wheel</code>. As the root user, run <code>visudo</code> to uncomment
the %wheel line containing the string <code>NOPASSWD:</code> and comment out the other %wheel line. When you are done,
it should look like this:</p> <div class="language- extra-class"><pre class="language-text"><code>## Allows people in group wheel to run all commands
#%wheel ALL=(ALL)       ALL

## Same thing without a password
%wheel ALL=(ALL)       NOPASSWD: ALL
</code></pre></div><p>The advantage of using <code>visudo</code> is that it will validate the changes to the file.</p> <h2 id="install-ansible-and-required-modules"><a href="#install-ansible-and-required-modules" aria-hidden="true" class="header-anchor">#</a> Install Ansible and required modules</h2> <p>Log into the Ansible controller node as the <code>core</code> user and run the following commands to install <code>git</code>, <code>ansible</code> and the required Python dependencies:</p> <div class="language- extra-class"><pre class="language-text"><code>dnf update -y
dnf install -y git ansible python3-netaddr python3-requests python3-pyvmomi python3-pip
 
cd /usr/bin
ln -s python3.7 python
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://gitlab.com/gmcgoldrick/openshift-on-simplivity/edit/master/docs-src/preparing/ansible-fedora.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/OpenShift-on-SimpliVity/preparing/verify-prereqs.html" class="prev">Verify prerequisites</a></span> <span class="next"><a href="/OpenShift-on-SimpliVity/preparing/rhel.html">Create the Red Hat Linux template</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/OpenShift-on-SimpliVity/assets/js/app.39bb32a3.js" defer></script><script src="/OpenShift-on-SimpliVity/assets/js/2.277d45f3.js" defer></script><script src="/OpenShift-on-SimpliVity/assets/js/36.d021de04.js" defer></script>
  </body>
</html>
