<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configuring cluster logging | Red Hat OpenShift Container Platform on HPE SimpliVity</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/OpenShift-on-SimpliVity/assets/css/0.styles.807d69a1.css" as="style"><link rel="preload" href="/OpenShift-on-SimpliVity/assets/js/app.3e6c55a6.js" as="script"><link rel="preload" href="/OpenShift-on-SimpliVity/assets/js/2.277d45f3.js" as="script"><link rel="preload" href="/OpenShift-on-SimpliVity/assets/js/27.6d852609.js" as="script"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/10.40a6dc39.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/11.897d7237.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/12.a983c9e1.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/13.d4f61521.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/14.741bff84.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/15.3f79955a.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/16.a33b8dac.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/17.30045ab4.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/18.6d6df367.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/19.fc4092bf.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/20.9e832dd3.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/21.586780f2.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/22.d12a49a2.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/23.48104bc6.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/24.201854c8.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/25.26f28cc0.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/26.9644a70e.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/28.8a30d6b2.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/29.9f8ee577.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/3.4bd42e2f.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/30.3d9e3dae.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/31.2f555e9d.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/32.7da3608f.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/33.1328ab0d.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/34.1279b9aa.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/35.98e18359.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/36.ec3e417c.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/37.64782826.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/38.cb18649d.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/39.6f3cfac9.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/4.34e28561.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/40.4693ffaa.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/41.9c12f663.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/42.ab98bcd0.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/43.b5104dfd.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/44.f3ce8908.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/45.3521734f.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/46.2599aa88.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/47.58953e26.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/48.33f04e0a.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/49.a7a70ee0.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/5.21f30cd0.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/50.65126e2a.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/51.16e7ceb2.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/52.65bd7808.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/53.fd63e470.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/54.97f999d9.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/55.f823ee0f.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/56.87c2e607.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/57.09056cad.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/58.01f28032.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/59.991b1673.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/6.63e09d56.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/60.a64287ee.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/61.76ce5abb.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/7.e9e2e574.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/8.30b5b9b7.js"><link rel="prefetch" href="/OpenShift-on-SimpliVity/assets/js/9.73359652.js">
    <link rel="stylesheet" href="/OpenShift-on-SimpliVity/assets/css/0.styles.807d69a1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/OpenShift-on-SimpliVity/" class="home-link router-link-active"><!----> <span class="site-name">Red Hat OpenShift Container Platform on HPE SimpliVity</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/OpenShift-on-SimpliVity/" class="nav-link">Home</a></div><div class="nav-item"><a href="/OpenShift-on-SimpliVity/blog/" class="nav-link">Blog</a></div> <a href="https://github.com/HewlettPackard/Openshift-on-Simplivity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/OpenShift-on-SimpliVity/" class="nav-link">Home</a></div><div class="nav-item"><a href="/OpenShift-on-SimpliVity/blog/" class="nav-link">Blog</a></div> <a href="https://github.com/HewlettPackard/Openshift-on-Simplivity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/OpenShift-on-SimpliVity/executive-summary.html" class="sidebar-link">Executive Summary</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Release Notes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Preparing the environment</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Configuring the solution</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Overview of the playbooks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Post deployment tasks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Configuring storage</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Adding worker nodes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Deploying cluster logging</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenShift-on-SimpliVity/logging/logging-intro.html" class="sidebar-link">Introduction to cluster logging</a></li><li><a href="/OpenShift-on-SimpliVity/logging/logging-config.html" class="active sidebar-link">Configuring cluster logging</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/OpenShift-on-SimpliVity/logging/logging-config.html#deploying-worker-nodes-for-cluster-logging" class="sidebar-link">Deploying worker nodes for cluster logging</a></li><li class="sidebar-sub-header"><a href="/OpenShift-on-SimpliVity/logging/logging-config.html#elasticsearch-storage" class="sidebar-link">Elasticsearch storage</a></li><li class="sidebar-sub-header"><a href="/OpenShift-on-SimpliVity/logging/logging-config.html#customizing-cluster-logging" class="sidebar-link">Customizing cluster logging</a></li></ul></li><li><a href="/OpenShift-on-SimpliVity/logging/logging-playbooks.html" class="sidebar-link">Playbooks for cluster logging</a></li><li><a href="/OpenShift-on-SimpliVity/logging/logging-validate.html" class="sidebar-link">Validating the cluster logging deployment</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Backup and restore</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Appendices</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="configuring-cluster-logging"><a href="#configuring-cluster-logging" aria-hidden="true" class="header-anchor">#</a> Configuring cluster logging</h1> <h2 id="deploying-worker-nodes-for-cluster-logging"><a href="#deploying-worker-nodes-for-cluster-logging" aria-hidden="true" class="header-anchor">#</a> Deploying worker nodes for cluster logging</h2> <p>Elasticsearch is a memory-intensive application. Each Elasticsearch node needs 16GB  of memory  and extra CPU resources.
The initial set of deployed OpenShift Container Platform worker nodes might not be large enough to support the
Elasticsearch cluster. You must add additional nodes to the OpenShift Container Platform cluster to run with the
recommended or higher memory and CPU requirements. Each Elasticsearch node can operate with a lower memory setting though
this is not recommended for production deployments.</p> <p>You should add new worker nodes to your cluster to facilitate hosting the logging stack, setting the <code>cpu</code> and
<code>ram</code> attributes to sufficiently large values for a production environment. In your hosts file, add new entries in
the <code>[rhcos_worker]</code> group:</p> <div class="language- extra-class"><pre class="language-text"><code>[rhcos_worker]
hpe-worker0   ansible_host=10.15.155.213
hpe-worker1   ansible_host=10.15.155.214
hpe-worker2   ansible_host=10.15.155.215  cpus=8 ram=32768  # Larger worker node for EFK
hpe-worker3   ansible_host=10.15.155.216  cpus=8 ram=32768  # Larger worker node for EFK
hpe-worker4   ansible_host=10.15.155.217  cpus=8 ram=32768  # Larger worker node for EFK
</code></pre></div><p>In the above example, each of these large CoreOS worker nodes will be allocated 8 virtual CPU cores and 32GB of RAM.
These values override the default limits of 4 virtual CPU cores and 16GB RAM defined in the <code>group_vars/worker.yml</code> file.</p> <p>Deploy the additional, large worker nodes using the procedure described in the section <code>Deploying CoreOS worker nodes</code>.</p> <h2 id="elasticsearch-storage"><a href="#elasticsearch-storage" aria-hidden="true" class="header-anchor">#</a> Elasticsearch storage</h2> <p>You can configure a persistent storage class and size for the Elasticsearch cluster. The Cluster Logging Operator creates a PersistentVolumeClaim for each data node in the Elasticsearch cluster based on these parameters.</p> <table><thead><tr><th style="text-align:left;">Variable</th> <th style="text-align:left;">File</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>efk_es_pv_size</code></td> <td style="text-align:left;"><strong>playbooks/roles/efk/vars/main.yml</strong></td> <td style="text-align:left;">Size of the Persistent Volume used to hold Elasticsearch data. The default size is <code>'200G'</code>.</td></tr> <tr><td style="text-align:left;"><code>efk_es_pv_storage_class</code></td> <td style="text-align:left;"><strong>playbooks/roles/efk/vars/main.yml</strong></td> <td style="text-align:left;">The Storage Class to use when creating Elasticsearch Persistent Volumes. The default storage class name is <code>'thin'</code>.</td></tr></tbody></table> <h2 id="customizing-cluster-logging"><a href="#customizing-cluster-logging" aria-hidden="true" class="header-anchor">#</a> Customizing cluster logging</h2> <p>The template file <code>playbooks/roles/efk/templates/clo-crd.yml.j2</code> contains the configuration used for deploying
Elasticsearch, Fluentd and Kibana.  The <code>requests</code> and <code>limits</code> settings for the resources required for each of the logging components can be modified in this file.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://gitlab.com/gmcgoldrick/openshift-on-simplivity/edit/master/docs-src/logging/logging-config.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/OpenShift-on-SimpliVity/logging/logging-intro.html" class="prev">Introduction to cluster logging</a></span> <span class="next"><a href="/OpenShift-on-SimpliVity/logging/logging-playbooks.html">Playbooks for cluster logging</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/OpenShift-on-SimpliVity/assets/js/app.3e6c55a6.js" defer></script><script src="/OpenShift-on-SimpliVity/assets/js/2.277d45f3.js" defer></script><script src="/OpenShift-on-SimpliVity/assets/js/27.6d852609.js" defer></script>
  </body>
</html>
